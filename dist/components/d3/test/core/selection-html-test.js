require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.html");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"sets the inner HTML as a string":function(e){e.html("<h1>Hello, world!</h1>"),assert.equal(document.body.firstChild.tagName,"H1"),assert.equal(document.body.firstChild.textContent,"Hello, world!")},"sets the inner HTML as a number":function(e){e.html(42),assert.equal(document.body.innerHTML,"42"),assert.equal(document.body.firstChild.nodeType,document.TEXT_NODE)},"sets the inner HTML as a function":function(e){e.data(["Subject"]).html(function(e,t){return"<b>"+e+"</b><i>"+t+"</i>"}),assert.equal(document.body.firstChild.tagName,"B"),assert.equal(document.body.firstChild.textContent,"Subject"),assert.equal(document.body.lastChild.tagName,"I"),assert.equal(document.body.lastChild.textContent,"0")},"clears the inner HTML as null":function(e){e.html(null),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as undefined":function(e){e.html(undefined),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as the empty string":function(e){e.html(""),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as a function returning the empty string":function(e){e.text(function(){return""}),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as a function returning null":function(e){e.text(function(){return null}),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"clears the inner HTML as a function returning undefined":function(e){e.text(function(){return undefined}),assert.equal(document.body.innerHTML,""),assert.isNull(document.body.firstChild)},"ignores null nodes":function(){var e=d3.select("body");e[0][0]=null,document.body.innerHTML="<h1>foo</h1>",e.html("bar"),assert.equal(document.body.textContent,"foo")},"returns the current selection":function(e){assert.isTrue(e.html("foo")===e)}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().append("div")},"sets the inner HTML as a string":function(e){e.html("<h1>Hello, world!</h1>"),assert.equal(e[0][0].firstChild.tagName,"H1"),assert.equal(e[0][0].firstChild.textContent,"Hello, world!"),assert.equal(e[0][1].firstChild.tagName,"H1"),assert.equal(e[0][1].firstChild.textContent,"Hello, world!")},"sets the inner HTML as a number":function(e){e.html(42),assert.equal(e[0][0].innerHTML,"42"),assert.equal(e[0][0].firstChild.nodeType,document.TEXT_NODE)},"sets the inner HTML as a function":function(e){e.data(["foo","bar"]).html(function(e,t){return"<b>"+e+"</b><i>"+t+"</i>"}),assert.equal(e[0][0].firstChild.tagName,"B"),assert.equal(e[0][0].firstChild.textContent,"foo"),assert.equal(e[0][0].lastChild.tagName,"I"),assert.equal(e[0][0].lastChild.textContent,"0"),assert.equal(e[0][1].firstChild.tagName,"B"),assert.equal(e[0][1].firstChild.textContent,"bar"),assert.equal(e[0][1].lastChild.tagName,"I"),assert.equal(e[0][1].lastChild.textContent,"1")},"clears the inner HTML as null":function(e){e.html(null),assert.equal(e[0][0].innerHTML,""),assert.isNull(e[0][0].firstChild),assert.equal(e[0][1].innerHTML,""),assert.isNull(e[0][1].firstChild)},"clears the inner HTML as a function":function(e){e.html(function(){return""}),assert.equal(e[0][0].innerHTML,""),assert.isNull(e[0][0].firstChild),assert.equal(e[0][1].innerHTML,""),assert.isNull(e[0][1].firstChild)},"ignores null nodes":function(e){var t=d3.selectAll("div");t[0][0]=null,e[0][0].innerHTML="<h1>foo</h1>",t.html("bar"),assert.equal(e[0][0].textContent,"foo"),assert.equal(e[0][1].textContent,"bar")},"returns the current selection":function(e){assert.isTrue(e.html("foo")===e)}}}),suite.export(module)