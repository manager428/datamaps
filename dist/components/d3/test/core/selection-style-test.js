require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.style");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"sets a property as a string":function(e){e.style("background-color","red"),assert.equal(document.body.style["background-color"],"red")},"sets a property as a number":function(e){e.style("opacity",.3),assert.equal(document.body.style.opacity,"0.3")},"sets a property as a function":function(e){e.style("background-color",function(){return"orange"}),assert.equal(document.body.style["background-color"],"orange")},"sets properties as a map of constants":function(e){e.style({"background-color":"white",opacity:.42}),assert.equal(document.body.style["background-color"],"white"),assert.equal(document.body.style.opacity,"0.42")},"sets properties as a map of functions":function(e){e.data(["orange"]).style({"background-color":String,opacity:function(e,t){return t}}),assert.equal(document.body.style["background-color"],"orange"),assert.equal(document.body.style.opacity,"0")},"gets a property value":function(e){document.body.style.setProperty("background-color","yellow",""),assert.equal(e.style("background-color"),"yellow")},"observes the specified priority":function(e){e.style("background-color","green","important"),assert.equal(document.body.style.getPropertyPriority("background-color"),"important"),e.style({opacity:.52},"important"),assert.equal(document.body.style.getPropertyPriority("opacity"),"important"),e.style({visibility:function(){return"visible"}},"important"),assert.equal(document.body.style.getPropertyPriority("visibility"),"important")},"removes a property as null":function(e){e.style("background-color","green").style("background-color",null),assert.equal(e.style("background-color"),"")},"removes a property as a function":function(e){e.style("background-color","green").style("background-color",function(){return null}),assert.equal(e.style("background-color"),"")},"removes properties as a map of nulls":function(e){document.body.style.setProperty("background-color","purple"),e.style({"background-color":null}),assert.equal(e.style("background-color"),"")},"removes properties as a map of functions that return null":function(e){document.body.style.setProperty("background-color","purple"),e.style({"background-color":function(){}}),assert.equal(e.style("background-color"),"")},"returns the current selection":function(e){assert.isTrue(e.style("background-color","green")===e)}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().append("div")},"sets a property as a string":function(e){e.style("background-color","red"),assert.equal(e[0][0].style["background-color"],"red"),assert.equal(e[0][1].style["background-color"],"red")},"sets a property as a number":function(e){e.style("opacity",.5),assert.equal(e[0][0].style.opacity,"0.5"),assert.equal(e[0][1].style.opacity,"0.5")},"sets a property as a function":function(e){e.style("background-color",d3.interpolateRgb("orange","yellow")),assert.equal(e[0][0].style["background-color"],"#ffa500"),assert.equal(e[0][1].style["background-color"],"#ffff00")},"gets a property value":function(e){e[0][0].style.setProperty("background-color","green",""),assert.equal(e.style("background-color"),"green")},"observes the specified priority":function(e){e.style("background-color","blue","important"),assert.equal(e[0][0].style.getPropertyPriority("background-color"),"important"),assert.equal(e[0][1].style.getPropertyPriority("background-color"),"important")},"removes a property as null":function(e){e.style("background-color","red").style("background-color",null),assert.equal(e[0][0].style["background-color"],""),assert.equal(e[0][1].style["background-color"],"")},"removes a property as a function":function(e){e.style("background-color","red").style("background-color",function(){return null}),assert.equal(e[0][0].style["background-color"],""),assert.equal(e[0][1].style["background-color"],"")},"ignores null nodes":function(e){var t=d3.selectAll("div");t[0][1]=null,t.style("background-color",null).style("background-color","red"),assert.equal(e[0][0].style["background-color"],"red"),assert.equal(e[0][1].style["background-color"],"")},"returns the current selection":function(e){assert.isTrue(e.style("background-color","green")===e)}}}),suite.export(module)