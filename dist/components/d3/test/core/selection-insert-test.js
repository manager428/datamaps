require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.insert");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"inserts before the specified selector":function(e){var t=e.html("").append("span"),n=e.insert("div","span");assert.equal(n[0][0].tagName,"DIV"),assert.isNull(n[0][0].namespaceURI),assert.domEqual(n[0][0],document.body.firstChild),assert.domEqual(n[0][0].nextSibling,t[0][0])},"appends an HTML element":function(e){var t=e.insert("div");assert.equal(t[0][0].tagName,"DIV"),assert.isNull(t[0][0].namespaceURI),assert.domEqual(t[0][0],document.body.lastChild)},"appends an SVG element":function(e){var t=e.insert("svg:svg");assert.equal(t[0][0].tagName,"SVG"),assert.equal(t[0][0].namespaceURI,"http://www.w3.org/2000/svg"),assert.domEqual(t[0][0].parentNode,document.body),assert.domEqual(t[0][0],document.body.lastChild)},"propagates data to new element":function(e){var t=new Object,n=e.data([t]).insert("div");assert.strictEqual(n[0][0].__data__,t)},"returns a new selection":function(e){assert.isFalse(e.insert("div")===e)},"inherits namespace from parent node":function(e){var t=e.insert("svg:svg").insert("g");assert.equal(t[0][0].namespaceURI,"http://www.w3.org/2000/svg")}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().insert("div")},"appends an HTML element":function(e){var t=e.insert("span");assert.equal(t[0].length,2),assert.equal(t[0][0].tagName,"SPAN"),assert.equal(t[0][1].tagName,"SPAN"),assert.isNull(t[0][0].namespaceURI),assert.isNull(t[0][1].namespaceURI),assert.domEqual(t[0][0].parentNode,e[0][0]),assert.domEqual(t[0][1].parentNode,e[0][1]),assert.domEqual(e[0][0].lastChild,t[0][0]),assert.domEqual(e[0][1].lastChild,t[0][1])},"appends an SVG element":function(e){var t=e.insert("svg:svg");assert.equal(t[0].length,2),assert.equal(t[0][0].tagName,"SVG"),assert.equal(t[0][1].tagName,"SVG"),assert.equal(t[0][0].namespaceURI,"http://www.w3.org/2000/svg"),assert.equal(t[0][1].namespaceURI,"http://www.w3.org/2000/svg"),assert.domEqual(t[0][0].parentNode,e[0][0]),assert.domEqual(t[0][1].parentNode,e[0][1]),assert.domEqual(e[0][0].lastChild,t[0][0]),assert.domEqual(e[0][1].lastChild,t[0][1])},"ignores null nodes":function(e){e.html("");var t=d3.selectAll("div");t[0][1]=null;var n=t.insert("span");assert.equal(n[0].length,2),assert.equal(n[0][0].tagName,"SPAN"),assert.domNull(n[0][1]),assert.domEqual(n[0][0].parentNode,e[0][0]),assert.domEqual(e[0][0].lastChild,n[0][0]),assert.domNull(e[0][1].lastChild)},"propagates data to new elements":function(e){var t=new Object,n=new Object,r=e.data([t,n]).insert("span");assert.strictEqual(r[0][0].__data__,t),assert.strictEqual(r[0][1].__data__,n)},"returns a new selection":function(e){assert.isFalse(e.insert("div")===e)}}}),suite.addBatch({"selectAll(div).data(â€¦).enter()":{topic:function(){return d3.select("body")},"inserts before the specified selector":function(e){var t=e.html("").append("span"),n=e.selectAll("div").data(d3.range(2)).enter().insert("div","span");assert.equal(n.length,1),assert.equal(n[0].length,2),assert.domEqual(n[0][0],document.body.firstChild),assert.domEqual(n[0][1].previousSibling,n[0][0]),assert.domEqual(n[0][1].nextSibling,t[0][0])},"propagates data to new elements":function(e){var t=new Object,n=new Object,r=e.html("").selectAll("div").data([t,n]).enter().insert("div");assert.strictEqual(r[0][0].__data__,t),assert.strictEqual(r[0][1].__data__,n)},"ignores null nodes":function(e){e.html("").insert("div");var t=e.selectAll("div").data(d3.range(3)).enter().insert("div");assert.equal(t.length,1),assert.equal(t[0].length,3),assert.domNull(t[0][0]),assert.domEqual(t[0][1].parentNode,document.body),assert.domEqual(t[0][2].parentNode,document.body)},"returns a new selection":function(e){var t=e.html("").selectAll("div").data([0,1]).enter();assert.isFalse(t.insert("div")===t)}}}),suite.export(module)