require("../env");var vows=require("vows"),assert=require("assert"),suite=vows.describe("selection.text");suite.addBatch({"select(body)":{topic:function(){return d3.select("body").html("")},"sets the text content as a string":function(e){e.text("Hello, world!"),assert.equal(document.body.textContent,"Hello, world!")},"sets the text content as a number":function(e){e.text(42),assert.equal(document.body.textContent,"42")},"sets the text content as a function":function(e){e.data(["Subject"]).text(function(e,t){return"Hello, "+e+" "+t+"!"}),assert.equal(document.body.textContent,"Hello, Subject 0!")},"escapes html content to text":function(e){e.text("<h1>Hello, world!</h1>"),assert.equal(document.body.textContent,"<h1>Hello, world!</h1>"),assert.equal(document.body.firstChild.nodeType,document.TEXT_NODE)},"clears the text content as null":function(e){e.text(null),assert.equal(document.body.textContent,"")},"clears the text content as undefined":function(e){e.text(undefined),assert.equal(document.body.textContent,"")},"clears the text content as a function returning null":function(e){e.text(function(){return null}),assert.equal(document.body.textContent,"")},"clears the text content as a function returning undefined":function(e){e.text(function(){return undefined}),assert.equal(document.body.textContent,"")},"ignores null nodes":function(){var e=d3.select("body");e[0][0]=null,document.body.textContent="foo",e.text("bar"),assert.equal(document.body.textContent,"foo")},"returns the current selection":function(e){assert.isTrue(e.text("hello")===e)}}}),suite.addBatch({"selectAll(div)":{topic:function(){return d3.select("body").html("").selectAll("div").data(d3.range(2)).enter().append("div")},"sets the text content as a string":function(e){e.text("Hello, world!"),assert.equal(e[0][0].textContent,"Hello, world!"),assert.equal(e[0][1].textContent,"Hello, world!")},"sets the text content as a number":function(e){e.text(42),assert.equal(e[0][0].textContent,"42"),assert.equal(e[0][1].textContent,"42")},"sets the text content as a function":function(e){e.data(["foo","bar"]).text(function(e,t){return"Hello, "+e+" "+t+"!"}),assert.equal(e[0][0].textContent,"Hello, foo 0!"),assert.equal(e[0][1].textContent,"Hello, bar 1!")},"escapes html content to text":function(e){e.text("<h1>Hello, world!</h1>"),assert.equal(e[0][0].textContent,"<h1>Hello, world!</h1>"),assert.equal(e[0][1].textContent,"<h1>Hello, world!</h1>"),assert.equal(e[0][0].firstChild.nodeType,document.TEXT_NODE),assert.equal(e[0][1].firstChild.nodeType,document.TEXT_NODE)},"ignores null nodes":function(e){e[0][0].textContent="foo";var t=d3.selectAll("div");t[0][0]=null,t.text("bar"),assert.equal(e[0][0].textContent,"foo"),assert.equal(e[0][1].textContent,"bar")},"returns the current selection":function(e){assert.isTrue(e.text("hello")===e)}}}),suite.export(module)