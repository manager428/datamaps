function d3_selection_classedRe(e){return new RegExp("(?:^|\\s+)"+d3.requote(e)+"(?:\\s+|$)","g")}function d3_selection_classed(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=e.trim().split(/\s+/).map(d3_selection_classedName);var n=e.length;return typeof t=="function"?i:r}function d3_selection_classedName(e){var t=d3_selection_classedRe(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.className,s=i.baseVal!=null,o=s?i.baseVal:i;r?(t.lastIndex=0,t.test(o)||(o=d3_collapse(o+" "+e),s?i.baseVal=o:n.className=o)):o&&(o=d3_collapse(o.replace(t," ")),s?i.baseVal=o:n.className=o)}}d3_selectionPrototype.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.className,t.baseVal!=null&&(t=t.baseVal);while(++i<r)if(!d3_selection_classedRe(e[i]).test(t))return!1}return!0}for(t in e)this.each(d3_selection_classed(t,e[t]));return this}return this.each(d3_selection_classed(e,t))}