function d3_layout_packSort(e,t){return e.value-t.value}function d3_layout_packInsert(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function d3_layout_packSplice(e,t){e._pack_next=t,t._pack_prev=e}function d3_layout_packIntersects(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return i*i-n*n-r*r>.001}function d3_layout_packSiblings(e){function p(e){n=Math.min(e.x-e.r,n),r=Math.max(e.x+e.r,r),i=Math.min(e.y-e.r,i),s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(d3_layout_packLink),o=t[0],o.x=-o.r,o.y=0,p(o);if(h>1){u=t[1],u.x=u.r,u.y=0,p(u);if(h>2){a=t[2],d3_layout_packPlace(o,u,a),p(a),d3_layout_packInsert(o,a),o._pack_prev=a,d3_layout_packInsert(a,u),u=o._pack_next;for(f=3;f<h;f++){d3_layout_packPlace(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(d3_layout_packIntersects(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(d3_layout_packIntersects(c,a))break;d?(v<m||v==m&&u.r<o.r?d3_layout_packSplice(o,u=l):d3_layout_packSplice(o=c,u),f--):(d3_layout_packInsert(o,a),u=a,p(a))}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++)a=t[f],a.x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach(d3_layout_packUnlink)}function d3_layout_packLink(e){e._pack_next=e._pack_prev=e}function d3_layout_packUnlink(e){delete e._pack_next,delete e._pack_prev}function d3_layout_packTransform(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)d3_layout_packTransform(i[s],t,n,r)}}function d3_layout_packPlace(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}d3.layout.pack=function(){function r(r,i){var s=e.call(this,r,i),o=s[0];o.x=0,o.y=0,d3_layout_treeVisitAfter(o,function(e){e.r=Math.sqrt(e.value)}),d3_layout_treeVisitAfter(o,d3_layout_packSiblings);var u=n[0],a=n[1],f=Math.max(2*o.r/u,2*o.r/a);if(t>0){var l=t*f/2;d3_layout_treeVisitAfter(o,function(e){e.r+=l}),d3_layout_treeVisitAfter(o,d3_layout_packSiblings),d3_layout_treeVisitAfter(o,function(e){e.r-=l}),f=Math.max(2*o.r/u,2*o.r/a)}return d3_layout_packTransform(o,u/2,a/2,1/f),s}var e=d3.layout.hierarchy().sort(d3_layout_packSort),t=0,n=[1,1];return r.size=function(e){return arguments.length?(n=e,r):n},r.padding=function(e){return arguments.length?(t=+e,r):t},d3_layout_hierarchyRebind(r,e)}