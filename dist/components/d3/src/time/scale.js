function d3_time_scale(e,t,n){function r(t){return e(t)}return r.invert=function(t){return d3_time_scaleDate(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(d3_time_scaleDate)},r.nice=function(e){return r.domain(d3_scale_nice(r.domain(),function(){return e}))},r.ticks=function(n,i){var s=d3_time_scaleExtent(r.domain());if(typeof n!="function"){var o=s[1]-s[0],u=o/n,a=d3.bisect(d3_time_scaleSteps,u);if(a==d3_time_scaleSteps.length)return t.year(s,n);if(!a)return e.ticks(n).map(d3_time_scaleDate);Math.log(u/d3_time_scaleSteps[a-1])<Math.log(d3_time_scaleSteps[a]/u)&&--a,n=t[a],i=n[1],n=n[0].range}return n(s[0],new Date(+s[1]+1),i)},r.tickFormat=function(){return n},r.copy=function(){return d3_time_scale(e.copy(),t,n)},d3.rebind(r,e,"range","rangeRound","interpolate","clamp")}function d3_time_scaleExtent(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function d3_time_scaleDate(e){return new Date(e)}function d3_time_scaleFormat(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}function d3_time_scaleSetYear(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function d3_time_scaleGetYear(e){var t=e.getFullYear(),n=d3_time_scaleSetYear(t),r=d3_time_scaleSetYear(t+1);return t+(e-n)/(r-n)}var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],d3_time_scaleLocalFormats=[[d3.time.format("%Y"),function(e){return!0}],[d3.time.format("%B"),function(e){return e.getMonth()}],[d3.time.format("%b %d"),function(e){return e.getDate()!=1}],[d3.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[d3.time.format("%I %p"),function(e){return e.getHours()}],[d3.time.format("%I:%M"),function(e){return e.getMinutes()}],[d3.time.format(":%S"),function(e){return e.getSeconds()}],[d3.time.format(".%L"),function(e){return e.getMilliseconds()}]],d3_time_scaleLinear=d3.scale.linear(),d3_time_scaleLocalFormat=d3_time_scaleFormat(d3_time_scaleLocalFormats);d3_time_scaleLocalMethods.year=function(e,t){return d3_time_scaleLinear.domain(e.map(d3_time_scaleGetYear)).ticks(t).map(d3_time_scaleSetYear)},d3.time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)}