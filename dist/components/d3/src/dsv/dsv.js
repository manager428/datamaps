function d3_dsv(e,t){function s(e,n){d3.text(e,t,function(e){n(e&&s.parse(e))})}function o(t){return t.map(u).join(e)}function u(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var n=new RegExp("\r\n|["+e+"\r\n]","g"),r=new RegExp('["'+e+"\n]"),i=e.charCodeAt(0);return s.parse=function(e){var t;return s.parseRows(e,function(e,n){if(n){var r={},i=-1,s=t.length;while(++i<s)r[t[i]]=e[i];return r}return t=e,null})},s.parseRows=function(e,t){function l(){if(n.lastIndex>=e.length)return s;if(f)return f=!1,r;var t=n.lastIndex;if(e.charCodeAt(t)===34){var o=t;while(o++<e.length)if(e.charCodeAt(o)===34){if(e.charCodeAt(o+1)!==34)break;o++}n.lastIndex=o+2;var u=e.charCodeAt(o+1);return u===13?(f=!0,e.charCodeAt(o+2)===10&&n.lastIndex++):u===10&&(f=!0),e.substring(t+1,o).replace(/""/g,'"')}var a=n.exec(e);return a?(f=a[0].charCodeAt(0)!==i,e.substring(t,a.index)):(n.lastIndex=e.length,e.substring(t))}var r={},s={},o=[],u=0,a,f;n.lastIndex=0;while((a=l())!==s){var c=[];while(a!==r&&a!==s)c.push(a),a=l();if(t&&!(c=t(c,u++)))continue;o.push(c)}return o},s.format=function(e){return e.map(o).join("\n")},s}