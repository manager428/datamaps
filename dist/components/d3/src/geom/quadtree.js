function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null}}function d3_geom_quadtreeVisit(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&d3_geom_quadtreeVisit(e,a[0],n,r,o,u),a[1]&&d3_geom_quadtreeVisit(e,a[1],o,r,i,u),a[2]&&d3_geom_quadtreeVisit(e,a[2],n,u,o,s),a[3]&&d3_geom_quadtreeVisit(e,a[3],o,u,i,s)}}function d3_geom_quadtreePoint(e){return{x:e[0],y:e[1]}}d3.geom.quadtree=function(e,t,n,r,i){function l(e,t,n,r,i,s){if(isNaN(t.x)||isNaN(t.y))return;if(e.leaf){var o=e.point;o?Math.abs(o.x-t.x)+Math.abs(o.y-t.y)<.01?c(e,t,n,r,i,s):(e.point=null,c(e,o,n,r,i,s),c(e,t,n,r,i,s)):e.point=t}else c(e,t,n,r,i,s)}function c(e,t,n,r,i,s){var o=(n+i)*.5,u=(r+s)*.5,a=t.x>=o,f=t.y>=u,c=(f<<1)+a;e.leaf=!1,e=e.nodes[c]||(e.nodes[c]=d3_geom_quadtreeNode()),a?n=o:i=o,f?r=u:s=u,l(e,t,n,r,i,s)}var s,o=-1,u=e.length;u&&isNaN(e[0].x)&&(e=e.map(d3_geom_quadtreePoint));if(arguments.length<5)if(arguments.length===3)i=r=n,n=t;else{t=n=Infinity,r=i=-Infinity;while(++o<u)s=e[o],s.x<t&&(t=s.x),s.y<n&&(n=s.y),s.x>r&&(r=s.x),s.y>i&&(i=s.y);var a=r-t,f=i-n;a>f?i=n+a:r=t+f}var h=d3_geom_quadtreeNode();return h.add=function(e){l(h,e,t,n,r,i)},h.visit=function(e){d3_geom_quadtreeVisit(e,h,t,n,r,i)},e.forEach(h.add),h}