function d3_scale_ordinal(e,t){function s(t){return r[((n.get(t)||n.set(t,e.push(t)))-1)%r.length]}function o(t,n){return d3.range(e.length).map(function(e){return t+n*e})}var n,r,i;return s.domain=function(r){if(!arguments.length)return e;e=[],n=new d3_Map;var i=-1,o=r.length,u;while(++i<o)n.has(u=r[i])||n.set(u,e.push(u));return s[t.t].apply(s,t.a)},s.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",a:arguments},s):r},s.rangePoints=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=(f-a)/(Math.max(1,e.length-1)+u);return r=o(e.length<2?(a+f)/2:a+l*u/2,l),i=0,t={t:"rangePoints",a:arguments},s},s.rangeBands=function(n,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=n[1]<n[0],l=n[f-0],c=n[1-f],h=(c-l)/(e.length-u+2*a);return r=o(l+h*a,h),f&&r.reverse(),i=h*(1-u),t={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(n,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=n[1]<n[0],l=n[f-0],c=n[1-f],h=Math.floor((c-l)/(e.length-u+2*a)),p=c-l-(e.length-u)*h;return r=o(l+Math.round(p/2),h),f&&r.reverse(),i=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return i},s.rangeExtent=function(){return d3_scaleExtent(t.a[0])},s.copy=function(){return d3_scale_ordinal(e,t)},s.domain(e)}d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})}