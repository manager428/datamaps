function cell(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return Math.max(0,e.dx-1)+"px"}).style("height",function(e){return Math.max(0,e.dy-1)+"px"})}var width=960,height=500,color=d3.scale.category20c(),treemap=d3.layout.treemap().size([width,height]).sticky(!0).value(function(e){return e.size}),div=d3.select("#chart").append("div").style("position","relative").style("width",width+"px").style("height",height+"px");d3.json("../data/flare.json",function(e){div.data([e]).selectAll("div").data(treemap.nodes).enter().append("div").attr("class","cell").style("background",function(e){return e.children?color(e.name):null}).call(cell).text(function(e){return e.children?null:e.name}),d3.select("#size").on("click",function(){div.selectAll("div").data(treemap.value(function(e){return e.size})).transition().duration(1500).call(cell),d3.select("#size").classed("active",!0),d3.select("#count").classed("active",!1)}),d3.select("#count").on("click",function(){div.selectAll("div").data(treemap.value(function(e){return 1})).transition().duration(1500).call(cell),d3.select("#size").classed("active",!1),d3.select("#count").classed("active",!0)})})