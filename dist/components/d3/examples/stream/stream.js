function transition(){d3.selectAll("path").data(function(){var e=data1;return data1=data0,data0=e}).transition().duration(2500).attr("d",area)}var n=20,m=200,data0=d3.layout.stack().offset("wiggle")(stream_layers(n,m)),data1=d3.layout.stack().offset("wiggle")(stream_layers(n,m)),color=d3.interpolateRgb("#aad","#556"),width=960,height=500,mx=m-1,my=d3.max(data0.concat(data1),function(e){return d3.max(e,function(e){return e.y0+e.y})}),area=d3.svg.area().x(function(e){return e.x*width/mx}).y0(function(e){return height-e.y0*height/my}).y1(function(e){return height-(e.y+e.y0)*height/my}),vis=d3.select("#chart").append("svg").attr("width",width).attr("height",height);vis.selectAll("path").data(data0).enter().append("path").style("fill",function(){return color(Math.random())}).attr("d",area)