function start(){function t(){var n=e.pop();line.data(n,Number).transition().duration(duration).attr("transform",transform),e.length?setTimeout(t,duration):(shuffle(data),setTimeout(start,duration+4e3))}var e=mergesort(data).reverse();t()}function transform(e,t){return"translate("+x(t)+","+height+")rotate("+a(e)+")"}function shuffle(e){var t=e.length,n,r;while(--t>0)n=~~(Math.random()*(t+1)),r=e[n],e[n]=e[t],e[t]=r;return e}function mergesort(e){function o(t,n,r){n=Math.min(e.length,n),r=Math.min(e.length,r);for(;t<n;t++)if(e[t]>e[n]){var i=e[t];return e[t]=e[n],u(n,r,i),!0}return!1}function u(t,n,r){while(t+1<n&&e[t+1]<r){var i=e[t];e[t]=e[t+1],e[t+1]=i,t++}e[t]=r}var t=[],n,r,i=e.length,s=1;while(s<e.length){n=r=0;while(n<e.length)r+=o(n,n+=s,n+=s);r?t.push(e.slice()):s<<=1}return t}var width=960,height=50,n=240,x=d3.scale.linear().domain([0,n]).range([height,width-height]),a=d3.scale.linear().domain([0,n-1]).range([150,210]),data=shuffle(d3.range(n)),duration=250,vis=d3.select("#chart").append("svg").attr("width",width).attr("height",height),line=vis.selectAll("line").data(data).enter().append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",height).attr("transform",transform);start()