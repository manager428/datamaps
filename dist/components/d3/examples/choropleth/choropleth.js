function quantize(e){return"q"+Math.min(8,~~(data[e.id]*9/12))+"-9"}var data,path=d3.geo.path(),svg=d3.select("#chart").append("svg"),counties=svg.append("g").attr("id","counties").attr("class","Blues"),states=svg.append("g").attr("id","states");d3.json("../data/us-counties.json",function(e){counties.selectAll("path").data(e.features).enter().append("path").attr("class",data?quantize:null).attr("d",path)}),d3.json("../data/us-states.json",function(e){states.selectAll("path").data(e.features).enter().append("path").attr("d",path)}),d3.json("unemployment.json",function(e){data=e,counties.selectAll("path").attr("class",quantize)})