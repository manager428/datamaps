function cell(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return e.dx-1+"px"}).style("height",function(e){return e.dy-1+"px"})}var width=960,height=500,fill=d3.scale.ordinal().range(colorbrewer.Greys[9].slice(1,4)),stroke=d3.scale.linear().domain([0,1e4]).range(["brown","steelblue"]),treemap=d3.layout.treemap().size([width,height]).value(function(e){return e.size}),bundle=d3.layout.bundle(),div=d3.select("#chart").append("div").style("position","relative").style("width",width+"px").style("height",height+"px"),line=d3.svg.line().interpolate("bundle").tension(.85).x(function(e){return e.x+e.dx/2}).y(function(e){return e.y+e.dy/2});d3.json("../data/flare-imports.json",function(e){var t=treemap.nodes(packages.root(e)),n=packages.imports(t);div.selectAll("div").data(t).enter().append("div").attr("class","cell").style("background",function(e){return e.children?fill(e.key):null}).call(cell).text(function(e){return e.children?null:e.key}),div.append("svg").attr("width",width).attr("height",height).style("position","absolute").selectAll("path.link").data(bundle(n)).enter().append("path").style("stroke",function(e){return stroke(e[0].value)}).attr("class","link").attr("d",line)})