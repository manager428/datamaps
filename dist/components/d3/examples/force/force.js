var width=960,height=500,color=d3.scale.category20(),force=d3.layout.force().charge(-120).linkDistance(30).size([width,height]),svg=d3.select("#chart").append("svg").attr("width",width).attr("height",height);d3.json("miserables.json",function(e){force.nodes(e.nodes).links(e.links).start();var t=svg.selectAll("line.link").data(e.links).enter().append("line").attr("class","link").style("stroke-width",function(e){return Math.sqrt(e.value)}),n=svg.selectAll("circle.node").data(e.nodes).enter().append("circle").attr("class","node").attr("r",5).style("fill",function(e){return color(e.group)}).call(force.drag);n.append("title").text(function(e){return e.name}),force.on("tick",function(){t.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),n.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})})})