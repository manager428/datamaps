var radius=480,tree=d3.layout.tree().size([360,radius-120]).separation(function(e,t){return(e.parent==t.parent?1:2)/e.depth}),diagonal=d3.svg.diagonal.radial().projection(function(e){return[e.y,e.x/180*Math.PI]}),vis=d3.select("#chart").append("svg").attr("width",radius*2).attr("height",radius*2-150).append("g").attr("transform","translate("+radius+","+radius+")");d3.json("../data/flare.json",function(e){var t=tree.nodes(e),n=vis.selectAll("path.link").data(tree.links(t)).enter().append("path").attr("class","link").attr("d",diagonal),r=vis.selectAll("g.node").data(t).enter().append("g").attr("class","node").attr("transform",function(e){return"rotate("+(e.x-90)+")translate("+e.y+")"});r.append("circle").attr("r",4.5),r.append("text").attr("dy",".31em").attr("text-anchor",function(e){return e.x<180?"start":"end"}).attr("transform",function(e){return e.x<180?"translate(8)":"rotate(180)translate(-8)"}).text(function(e){return e.name})})