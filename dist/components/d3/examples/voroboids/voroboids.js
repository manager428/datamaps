function nullGravity(){mouse[0]=mouse[1]=null}var width=960,height=500,mouse=[null,null],fill=d3.scale.linear().domain([0,1e4]).range(["brown","steelblue"]),boids=d3.range(100).map(function(){return boid().position([Math.random()*width,Math.random()*height]).velocity([Math.random()*2-1,Math.random()*2-1]).gravityCenter(mouse)}),vertices=boids.map(function(e){return e(boids)});d3.select(window).on("blur",nullGravity);var svg=d3.select("#vis").append("svg").attr("width",width).attr("height",height).attr("class","PiYG").on("mousemove",function(){var e=d3.mouse(this);mouse[0]=e[0],mouse[1]=e[1]}).on("mouseout",nullGravity);svg.selectAll("path").data(d3.geom.voronoi(vertices)).enter().append("path").attr("class",function(e,t){return t?"q"+t%9+"-9":null}).attr("d",function(e){return"M"+e.join("L")+"Z"}),svg.selectAll("circle").data(vertices).enter().append("circle").attr("transform",function(e){return"translate("+e+")"}).attr("r",2),d3.timer(function(){boids.forEach(function(e,t){vertices[t]=e(boids)}),svg.selectAll("circle").data(vertices).attr("transform",function(e){return"translate("+e+")"}),svg.selectAll("path").data(d3.geom.voronoi(vertices)).attr("d",function(e){return"M"+e.join("L")+"Z"}).style("fill",function(e){return fill(d3.geom.polygon(e).area())})})