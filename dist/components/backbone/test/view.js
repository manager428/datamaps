$(document).ready(function(){var e;module("Backbone.View",{setup:function(){e=new Backbone.View({id:"test-view",className:"test-view"})}}),test("View: constructor",function(){equal(e.el.id,"test-view"),equal(e.el.className,"test-view"),equal(e.options.id,"test-view"),equal(e.options.className,"test-view")}),test("View: jQuery",function(){e.setElement(document.body),ok(e.$("#qunit-header a").get(0).innerHTML.match(/Backbone Test Suite/)),ok(e.$("#qunit-header a").get(1).innerHTML.match(/Backbone Speed Suite/))}),test("View: make",function(){var t=e.make("div",{id:"test-div"},"one two three");equal(t.tagName.toLowerCase(),"div"),equal(t.id,"test-div"),equal($(t).text(),"one two three")}),test("View: initialize",function(){var e=Backbone.View.extend({initialize:function(){this.one=1}}),t=new e;equal(t.one,1)}),test("View: delegateEvents",function(){var t=0,n=0;e.setElement(document.body),e.increment=function(){t++},e.$el.bind("click",function(){n++});var r={"click #qunit-banner":"increment"};e.delegateEvents(r),$("#qunit-banner").trigger("click"),equal(t,1),equal(n,1),$("#qunit-banner").trigger("click"),equal(t,2),equal(n,2),e.delegateEvents(r),$("#qunit-banner").trigger("click"),equal(t,3),equal(n,3)}),test("View: delegateEvents allows functions for callbacks",function(){e.counter=0,e.setElement("#qunit-banner");var t={click:function(){this.counter++}};e.delegateEvents(t),$("#qunit-banner").trigger("click"),equal(e.counter,1),$("#qunit-banner").trigger("click"),equal(e.counter,2),e.delegateEvents(t),$("#qunit-banner").trigger("click"),equal(e.counter,3)}),test("View: undelegateEvents",function(){var t=0,n=0;e.setElement(document.body),e.increment=function(){t++},$(e.el).unbind("click"),$(e.el).bind("click",function(){n++});var r={"click #qunit-userAgent":"increment"};e.delegateEvents(r),$("#qunit-userAgent").trigger("click"),equal(t,1),equal(n,1),e.undelegateEvents(),$("#qunit-userAgent").trigger("click"),equal(t,1),equal(n,2),e.delegateEvents(r),$("#qunit-userAgent").trigger("click"),equal(t,2),equal(n,3)}),test("View: _ensureElement with DOM node el",function(){var e=Backbone.View.extend({el:document.body}),t=new e;equal(t.el,document.body)}),test("View: _ensureElement with string el",function(){var e=Backbone.View.extend({el:"body"}),t=new e;equal(t.el,document.body),e=Backbone.View.extend({el:"body > h2"}),t=new e,equal(t.el,$("#qunit-banner").get(0)),e=Backbone.View.extend({el:"#nonexistent"}),t=new e,ok(!t.el)}),test("View: with attributes",function(){var e=new Backbone.View({attributes:{"class":"one",id:"two"}});equal(e.el.className,"one"),equal(e.el.id,"two")}),test("View: with attributes as a function",function(){var e=Backbone.View.extend({attributes:function(){return{"class":"dynamic"}}});equal((new e).el.className,"dynamic")}),test("View: multiple views per element",function(){var e=0,t=Backbone.View.extend({el:$("body"),events:{click:"click"},click:function(){e++}}),n=new t;$("body").trigger("click"),equal(1,e);var r=new t;$("body").trigger("click"),equal(3,e),n.delegateEvents(),$("body").trigger("click"),equal(5,e)}),test("View: custom events, with namespaces",function(){var e=0,t=Backbone.View.extend({el:$("body"),events:function(){return{"fake$event.namespaced":"run"}},run:function(){e++}}),n=new t;$("body").trigger("fake$event").trigger("fake$event"),equal(e,2),$("body").unbind(".namespaced"),$("body").trigger("fake$event"),equal(e,2)}),test("#1048 - setElement uses provided object.",function(){var e=$("body"),t=new Backbone.View({el:e});ok(t.$el===e),t.setElement(e=$(e)),ok(t.$el===e)}),test("#986 - Undelegate before changing element.",1,function(){var e=$("<button></button>"),t=$("<button></button>"),n=Backbone.View.extend({events:{click:function(e){ok(r.el===e.target)}}}),r=new n({el:e});r.setElement(t),e.trigger("click"),t.trigger("click")})})